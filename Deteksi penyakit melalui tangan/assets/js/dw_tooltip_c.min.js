var dw_Event={add:function(e,t,n,r){r=r||false;if(e.addEventListener)e.addEventListener(t,n,r);else if(e.attachEvent)e.attachEvent("on"+t,n)},remove:function(e,t,n,r){r=r||false;if(e.removeEventListener)e.removeEventListener(t,n,r);else if(e.detachEvent)e.detachEvent("on"+t,n)},DOMit:function(e){e=e?e:window.event;if(!e.target)e.target=e.srcElement;if(!e.preventDefault)e.preventDefault=function(){e.returnValue=false;return false};if(!e.stopPropagation)e.stopPropagation=function(){e.cancelBubble=true};return e},getTarget:function(e){e=dw_Event.DOMit(e);var t=e.target;if(t.nodeType!=1)t=t.parentNode;return t}};var dw_Viewport={getWinWidth:function(){this.width=0;if(window.innerWidth)this.width=window.innerWidth-18;else if(document.documentElement&&document.documentElement.clientWidth)this.width=document.documentElement.clientWidth;else if(document.body&&document.body.clientWidth)this.width=document.body.clientWidth;return this.width},getWinHeight:function(){this.height=0;if(window.innerHeight)this.height=window.innerHeight-18;else if(document.documentElement&&document.documentElement.clientHeight)this.height=document.documentElement.clientHeight;else if(document.body&&document.body.clientHeight)this.height=document.body.clientHeight;return this.height},getScrollX:function(){this.scrollX=0;if(typeof window.pageXOffset=="number")this.scrollX=window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)this.scrollX=document.documentElement.scrollLeft;else if(document.body&&document.body.scrollLeft)this.scrollX=document.body.scrollLeft;else if(window.scrollX)this.scrollX=window.scrollX;return this.scrollX},getScrollY:function(){this.scrollY=0;if(typeof window.pageYOffset=="number")this.scrollY=window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)this.scrollY=document.documentElement.scrollTop;else if(document.body&&document.body.scrollTop)this.scrollY=document.body.scrollTop;else if(window.scrollY)this.scrollY=window.scrollY;return this.scrollY},getAll:function(){this.getWinWidth();this.getWinHeight();this.getScrollX();this.getScrollY()}};var dw_Util;if(!dw_Util)dw_Util={};dw_Util.getImage=function(e){var t=new Image;t.src=e;return t};dw_Util.forBackCompatWidth=function(e){var t=0;var n=dw_Util.getCurrentStyle;if(e.currentStyle&&!window.opera&&(document.compatMode==null||document.compatMode=="BackCompat")){var r=parseInt(n(e,"paddingLeft"));var i=parseInt(n(e,"paddingRight"));var s=parseInt(n(e,"borderLeftWidth"));var o=parseInt(n(e,"borderRightWidth"));t=(!isNaN(r)?r:0)+(!isNaN(i)?i:0)+(!isNaN(s)?s:0)+(!isNaN(o)?o:0)}return t};dw_Util.getCurrentStyle=function(e,t){var n="";if(document.defaultView&&document.defaultView.getComputedStyle){n=document.defaultView.getComputedStyle(e,null)[t]}else if(e.currentStyle){n=e.currentStyle[t];if(!/^\d+(px)?$/i.test(n)&&/^\d/.test(n)){var r=e.style.left;var i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;e.style.left=n||0;n=e.style.pixelLeft+"px";e.style.left=r;e.runtimeStyle.left=i}}return n};dw_Util.writeStyleRule=function(e,t){var n=t!=false?' media="screen">':">";document.write('\n<style type="text/css"'+n+e+"</style>")};dw_Util.mouseleave=function(e,t){e=dw_Event.DOMit(e);var n=e.relatedTarget?e.relatedTarget:e.toElement?e.toElement:null;if(t!=n&&!dw_Util.contained(n,t)){return true}return false};dw_Util.contained=function(e,t){if(!e)return null;while(e=e.parentNode)if(e==t)return true;return false};dw_Util.getPageOffsets=function(e){var t=0,n=0;do{t+=e.offsetLeft;n+=e.offsetTop}while(e=e.offsetParent);return{x:t,y:n}};dw_Util.isTouchDevice=function(){return"ontouchend"in document};dw_Util.makeClickable=function(e,t){t=t||document;if(t.querySelectorAll){var n=t.querySelectorAll(e);for(var r=0;n[r];r++){dw_Event.add(n[r],"click",function(){})}}};var dw_Tooltip={tip:null,timer:0,hoverTimer:0,active:false,actuator:null,resetFlag:false,restored:true,init:function(){var e=dw_Tooltip,t;if(e.hasSupport()){e.setProps(true);if(dw_Util.isTouchDevice()){if(!e.supportTouch){return}e.forTouch=true}if(!(t=document.getElementById(e.tipID))){t=document.createElement("div");t.id=e.tipID;document.body.appendChild(t)}t.style.position="absolute";t.style.visibility="hidden";t.style.zIndex=1e4;e.tip=t;if(e.forTouch||e.activateOnClick){e.showDelay=1;e.hideDelay=1}e.setProps();e.setPosition(0,0);e.initHandlers()}},hasSupport:function(){var e=document;if(e.createElement&&e.getElementsByTagName&&(e.addEventListener||e.attachEvent)){return true}return false},setProps:function(e){var t=dw_Tooltip;var n=e?t.getDefaultsList():t.getPropsList();var r,i;if(!t.defaultProps)t.defaultProps={};for(var s=0;i=n[s];s++){r=i[0];t[r]=typeof t.defaultProps[r]==i[1]?t.defaultProps[r]:i[2]}if(!e){t.tip.className=t.klass;t.coordinateOptions()}},getDefaultsList:function(){return[["offX","number",12],["offY","number",12],["showDelay","number",100],["hideDelay","number",100],["hoverDelay","number",500],["tipID","string","tipDiv"],["actuatorClass","string","showTip"],["maxLoops","number",2],["supportTouch","boolean",false],["activateOnClick","boolean",false],["showCloseBox","boolean",false],["closeBoxImage","string",""],["activateOnFocus","boolean",true],["content_source","string","content_vars"],["on_activate","function",function(){}],["on_show","function",function(){}],["on_position","function",function(){}],["on_deactivate","function",function(){}],["on_hide","function",function(){}]]},getPropsList:function(){return[["klass","string",""],["followMouse","boolean",true],["sticky","boolean",false],["hoverable","boolean",false],["duration","number",0],["jumpAbove","boolean",true],["jumpLeft","boolean",true],["Left","boolean",false],["Above","boolean",false],["positionFn","function",this.positionRelEvent],["wrapFn","function",this.plainWrap]]},plainWrap:function(e){return e},activate:function(e,t,n,r){var i=dw_Tooltip;if(!i.tip)return;i.clearTimer("timer");i.clearTimer("hoverTimer");if(!i.restored){i.handleRestore()}i.actuator=t;dw_Viewport.getAll();i.getContent(e,t,n,r);if(!i.tip.innerHTML)return;i.active=true;i.on_activate();i.positionFn(e,t);i.adjust();i.timer=setTimeout(i.show,i.showDelay)},getContent:function(e,t,n,r){var i=dw_Tooltip,s,o;if(r&&!n){s=i.content_vars||{};o=s[r]?s[r]:false;if(typeof o=="string"){n=o}else if(typeof o=="object"){i.checkForProps(o);if(i.content_source=="ajax"&&!o["static"]){i.initAjaxRequest(r)}if(o["content"]){n=o["content"]}else if(o["html_id"]){var u=document.getElementById(o["html_id"]);if(u)n=u.innerHTML}else{n=o}}}i.restored=false;i.handleOptions(e);i.writeTip(n)},writeTip:function(e){e=this.wrapFn(e);this.tip.innerHTML=e},positionRelEvent:function(e,t){var n=dw_Tooltip,r;if(typeof e=="object"){if(e.type=="mouseover"||e.type=="mousemove"||e.type=="click"){n.evX=n.getMouseEventX(e);n.evY=n.getMouseEventY(e);if(e.type=="click"){r=dw_Util.getPageOffsets(t);if(n.evX>r.x+t.offsetWidth||n.evX<r.x||n.evY>r.y+t.offsetHeight||n.evY<r.y){n.evX=r.x;n.evY=r.y;n.foc=true}}}else{r=dw_Util.getPageOffsets(t);n.evX=r.x;n.evY=r.y;n.foc=true}}var i=n.calcPosCoords(e,t);n.setPosition(i.x,i.y)},calcPosCoords:function(e,t){var n=dw_Viewport,r=dw_Tooltip;var i=r.evX,s=r.evY;var o=r.getMaxX(),u=r.getMaxY();var a,f,l,c;var h=i+r.offX,p=s+r.offY;var d=i-(r.width+r.offX);var v=s-(r.height+r.offY);var m=i-n.scrollX>n.width/2;var g=s-n.scrollY>n.height/2;if(typeof e=="object"&&r.foc){r.focX=i+r.offX+t.offsetWidth;if(r.focX<=o){h=r.focX}else{h=r.focX=o}}else if(r.focX){h=r.focX}if(h<=o&&!r.Left){i=h}else if(d>=n.scrollX&&(r.jumpLeft||r.Left)){i=d}else if(r.jumpLeft&&m||r.Left){i=n.scrollX;a="Left"}else{i=o;a="Right"}if(p<=u&&!r.Above){s=p}else if(v>=n.scrollY&&(r.jumpAbove||r.Above)){s=v}else if(r.jumpAbove&&g||r.Above){s=n.scrollY;f="Above"}else{s=u;f="Below"}if(a&&f){l=a=="Left"?n.scrollX-d:h-o;c=f=="Above"?n.scrollY-v:p-u;if(l<=c){i=a=="Left"?d:h}else{s=f=="Above"?v:p}}return{x:i,y:s}},adjust:function(){function r(){if(!e.active)return;e.positionFn();if(n&&!n.complete){setTimeout(r,50)}}var e=dw_Tooltip;var t=e.tip.getElementsByTagName("img");var n=t.length?t[t.length-1]:null;r()},setPosition:function(e,t){this.tip.style.left=e+"px";this.tip.style.top=t+"px";this.on_position()},show:function(){var e=dw_Tooltip;e.tip.style.visibility="visible";e.on_show()},deactivate:function(e){var t=dw_Tooltip;if(!t.tip||!t.active||t.sticky){return}e=e?e:window.event;if(e.type&&e.type=="mouseout"&&!dw_Util.mouseleave(e,t.actuator)){return}t.clearTimer("timer");t.clearTimer("hoverTimer");if(t.hoverable){t.hoverTimer=setTimeout(t.hide,t.hoverDelay);return}if(t.duration){t.timer=setTimeout(t.hide,t.duration);return}t.on_deactivate();t.timer=setTimeout(t.hide,t.hideDelay)},hide:function(){var e=dw_Tooltip;if(!e.tip)return;e.tip.style.visibility="hidden";e.handleRestore();e.on_hide()},handleOptions:function(e){var t=dw_Tooltip;t.coordinateOptions();if(t.klass){t.tip.className=t.klass}if(t.hoverable){t.tip.onmouseout=t.tipOutCheck;t.tip.onmouseover=function(){t.clearTimer("hoverTimer")}}else if(t.followMouse&&!(e.type=="focus"||e.type=="focusin")){dw_Event.add(document,"mousemove",t.positionRelEvent,true)}else if(!(t.forTouch||t.activateOnClick)&&(t.sticky||t.duration)){dw_Event.add(document,"mouseup",t.checkDocClick,true)}if(!t.activateOnClick){dw_Event.add(t.actuator,"click",t.checkLinkClick)}},coordinateOptions:function(){var e=dw_Tooltip;if(e.forTouch||e.activateOnClick||e.sticky||e.hoverable||e.duration||e.positionFn!=e.positionRelEvent){e.followMouse=false}if(e.forTouch||e.activateOnClick||e.sticky){e.hoverable=false;e.duration=0}if(e.hoverable){e.duration=0}if((e.sticky||e.forTouch||e.activateOnClick)&&e.wrapFn==e.plainWrap){e.wrapFn=e.handleWrapOpts}},handleRestore:function(){var e=dw_Tooltip;if(e.followMouse){dw_Event.remove(document,"mousemove",e.positionRelEvent,true)}else if(!(e.forTouch||e.activateOnClick)&&(e.sticky||e.duration)){dw_Event.remove(document,"mouseup",e.checkDocClick,true)}if(!e.forTouch){e.tip.onmouseover=e.tip.onmouseout=function(){}}if(!e.activateOnClick&&e.actuator){dw_Event.remove(e.actuator,"click",e.checkLinkClick)}if(e.resetFlag){e.setProps()}e.resetRequest();e.tip.innerHTML="";e.active=false;e.actuator=null;e.tip.style.width="";e.focX=0;e.foc=false;e.restored=true},getTipClass:function(e){if(!e){return""}var t="",n=e.split(/\s+/);for(var r=0;n[r];r++){if(n[r]==this.actuatorClass&&n[r+1]){t=n[r+1];break}}return t},checkForProps:function(e){var t=dw_Tooltip,n=t.getPropsList(),r;for(var i=0;n[i];i++){r=n[i][0];if(typeof e[r]!="undefined"){t[r]=e[r];t.resetFlag=true}}},tipOutCheck:function(e){var t=dw_Tooltip,n=this;if(dw_Util.mouseleave(e,n)){t.timer=setTimeout(t.hide,t.hideDelay)}},checkEscKey:function(e){e=e?e:window.event;if(e.keyCode==27)dw_Tooltip.hide()},checkDocClick:function(e){var t=dw_Tooltip;if(!t.active)return;var n=dw_Event.getTarget(e);var r=document.getElementById(t.tipID);if(n===t.actuator||n===r){return}else if(dw_Util.contained(n,r)){if(n.tagName&&n.tagName.toLowerCase()=="img")n=n.parentNode;if(n.tagName.toLowerCase()!="a"||n.href.indexOf("dw_Tooltip.hide")!=-1)return}t.timer=setTimeout(t.hide,10)},checkLinkClick:function(e){var t=dw_Tooltip,n=t.actuator,r,i,s,o,u;if(!(n.nodeName.toLowerCase()=="a")&&!(n.nodeName.toLowerCase()=="area")){return}i=n.href;if(!i||!(i.lastIndexOf("#")==i.length-1)){return}r=location.href;u=r.indexOf("#");s=u!=-1?r.slice(0,u):r;u=i.indexOf("#");o=u!=-1?i.slice(0,u):i;if(s==o){e=dw_Event.DOMit(e);e.preventDefault()}},clearTimer:function(e){if(dw_Tooltip[e]){clearTimeout(dw_Tooltip[e]);dw_Tooltip[e]=0}},initAjaxRequest:function(){},resetRequest:function(){},getWidth:function(){return this.width=this.tip.offsetWidth},getHeight:function(){return this.height=this.tip.offsetHeight},getMaxX:function(){return dw_Viewport.width+dw_Viewport.scrollX-this.getWidth()-1},getMaxY:function(){return dw_Viewport.height+dw_Viewport.scrollY-this.getHeight()-1},getMouseEventX:function(e){return e.pageX?e.pageX:e.clientX+dw_Viewport.scrollX},getMouseEventY:function(e){return e.pageY?e.pageY:e.clientY+dw_Viewport.scrollY},checkForActuator:function(e){var t=dw_Event.getTarget(e);if(!t){return}var n=dw_Tooltip,r=null,i=0,s="",o="",u=n.maxLoops;do{if(r=n.getActuatorInfo(t)){s=r.msg;o=r.id;switch(e.type){case"mouseover":if(!n.forTouch){if(window.attachEvent){dw_Event.remove(t,"mouseout",n.deactivate)}dw_Event.add(t,"mouseout",n.deactivate)}if(n.forTouch&&n.activateOnClick){dw_Event.add(t,"click",function(e){e.preventDefault()})}break;case"click":if(n.activateOnClick){e.preventDefault()}break;case"focus":case"focusin":if(n.active&&t==n.actuator){return}if(window.addEventListener){dw_Event.add(t,"blur",n.deactivate)}else if(window.attachEvent){dw_Event.add(t,"focusout",n.deactivate)}break}n.activate(e,t,s,o);break}i++}while(i<u&&(t=t.parentNode))},getActuatorInfo:function(e){var t=dw_Tooltip,n=t.getTipClass(e.className);if(!n)return"";var r=t.content_vars||{},i="",s="",o;s=r&&r[n]?n:"";if(!s&&t.content_source=="class_id"&&(o=document.getElementById(n))){i=o.innerHTML}if(s||i){return{msg:i,id:s}}return false},initHandlers:function(){var e=dw_Tooltip;if(e.ready){return}if(!e.forTouch){if(e.activateOnClick){dw_Event.add(document,"click",e.checkForActuator,true);dw_Event.add(document,"mouseup",e.checkDocClick,true)}else{dw_Event.add(document,"mouseover",e.checkForActuator,true)}dw_Event.add(document,"keydown",e.checkEscKey,true);if(!e.activateOnClick&&e.activateOnFocus){if(window.addEventListener){dw_Event.add(document,"focus",e.checkForActuator,true)}else if(window.attachEvent){dw_Event.add(document,"focusin",e.checkForActuator)}}}else{dw_Event.add(document,"mouseover",e.checkForActuator,true)}e.ready=true}};dw_Tooltip.writeStyleRule=function(){if(dw_Tooltip.hasSupport()){dw_Util.writeStyleRule(".tipContent { display:none; }")}};dw_Tooltip.posWinCenter=dw_Tooltip.positionWindowCenter=function(){var e=dw_Viewport,t=dw_Tooltip;var n=Math.round((e.width-t.tip.offsetWidth)/2)+e.scrollX;var r=Math.round((e.height-t.tip.offsetHeight)/2)+e.scrollY;t.setPosition(n,r)};dw_Tooltip.posCenterAboveTgt=function(){var e=dw_Tooltip;var t=e.actuator;var n=dw_Util.getPageOffsets(t);var r=n.x+(t.offsetWidth/2-e.tip.offsetWidth/2);var i=n.y-e.tip.offsetHeight;e.setPosition(r,i)};dw_Tooltip.posCenterBelowTgt=function(){var e=dw_Tooltip;var t=e.actuator;var n=dw_Util.getPageOffsets(t);var r=n.x+(t.offsetWidth/2-e.tip.offsetWidth/2);var i=n.y+t.offsetHeight+e.offY;e.setPosition(r,i)};dw_Tooltip.posLeftTgt=function(){var e=dw_Tooltip;var t=e.actuator;var n=dw_Util.getPageOffsets(t);var r=n.x-(e.tip.offsetWidth+e.offX);var i=n.y;e.setPosition(r,i)};dw_Tooltip.posRightTgt=function(){var e=dw_Tooltip;var t=e.actuator;var n=dw_Util.getPageOffsets(t);var r=n.x+t.offsetWidth+e.offX;var i=n.y;e.setPosition(r,i)};dw_Tooltip.wrapWithCloseBox=function(e,t){t=t||"";var n=this.closeBoxImage||"",r="",i,s;if(n){dw_Util.getImage(n)}else{r=' style="text-decoration:none; font-weight:bold;"'}i=n?'<img style="border:none" src="'+n+'" alt="Close box" />':"X";s='<div class="topBar"><span class="closeBox" style="position:absolute; top:0; right:0; text-align:right;"><a href="javascript: void dw_Tooltip.hide()"'+r+">"+i+'</a></span><span class="caption">'+t+'</span></div><div class="XtipContent">'+e+"</div>";return s};dw_Tooltip.wrapWithCloseLink=function(e,t){if(t){e='<div class="caption">'+t+"</div>"+e}e+='<div class="close" style="text-align:center; margin:4px 0;"><a href="javascript: void dw_Tooltip.hide()">Close</a></div>';return e};dw_Tooltip.handleWrapOpts=function(e,t){var n=dw_Tooltip;var r=t&&t["w"]?t["w"]:"";var i=t&&t["caption"]?t["caption"]:"";if(n.sticky||n.activateOnClick||n.forTouch){e=n.showCloseBox?n.wrapWithCloseBox(e,i):n.wrapWithCloseLink(e,i)}else if(i){e='<div class="caption">'+i+"</div>"+e}if(r&&n.showCloseBox&&(n.sticky||n.activateOnClick||n.forTouch)){r+=8}if(r){n.setTipWidth(r)}return e};dw_Tooltip.wrapToWidth=function(e){var t=dw_Tooltip;var n="";if(e["img"]){dw_Util.getImage(e["img"]);n='<img src="'+e["img"]+'" alt="" />'}else{n=e["str"]}return dw_Tooltip.handleWrapOpts(n,e)};dw_Tooltip.wrapImageOverText=function(e){dw_Util.getImage(e["img"]);var t='<div class="img"><img src="'+e["img"]+'" alt="" /></div><div class="txt">'+e["txt"]+"</div>";return dw_Tooltip.handleWrapOpts(t,e)};dw_Tooltip.wrapTextOverImage=function(e){dw_Util.getImage(e["img"]);var t='<div class="txt">'+e["txt"]+'</div><div class="img"><img src="'+e["img"]+'" alt="" /></div>';return dw_Tooltip.handleWrapOpts(t,e)};dw_Tooltip.wrapTextByImage=function(e){dw_Util.getImage(e["img"]);var t='<table cellpadding="0" cellspacing="0" border="0"><tr>'+'<td><div class="txt">'+e["txt"]+"</div></td>"+'<td><div class="img"><img src="'+e["img"]+'" alt="" /></div>'+"</td></tr></table>";return dw_Tooltip.handleWrapOpts(t,e)};dw_Tooltip.wrapImageToWidth=function(e){var t=dw_Tooltip;dw_Util.getImage(e["img"]);var n='<img src="'+e["img"]+'" width="'+e["w"]+'" height="'+e["h"]+'" alt="" />';return dw_Tooltip.handleWrapOpts(n,e)};dw_Tooltip.setTipWidth=function(e){e=parseInt(e)+dw_Util.forBackCompatWidth(this.tip);this.tip.style.width=e+"px"};dw_Event.add(window,"load",dw_Tooltip.init)